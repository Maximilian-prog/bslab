<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bslab: BlockDevice Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bslab
   </div>
   <div id="projectbrief">Simple file system implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_block_device-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BlockDevice Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Emulate a block device.  
 <a href="class_block_device.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="blockdevice_8h_source.html">blockdevice.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5d69d96c45c02ac4cffb3107f50ebd92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#a5d69d96c45c02ac4cffb3107f50ebd92">BlockDevice</a> (uint32_t blockSize)</td></tr>
<tr class="memdesc:a5d69d96c45c02ac4cffb3107f50ebd92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new block device.  <a href="class_block_device.html#a5d69d96c45c02ac4cffb3107f50ebd92">More...</a><br /></td></tr>
<tr class="separator:a5d69d96c45c02ac4cffb3107f50ebd92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c38e944b32b2f82b9b7abe7fd549ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#a91c38e944b32b2f82b9b7abe7fd549ae">open</a> (const char *path)</td></tr>
<tr class="memdesc:a91c38e944b32b2f82b9b7abe7fd549ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an existing container file.  <a href="class_block_device.html#a91c38e944b32b2f82b9b7abe7fd549ae">More...</a><br /></td></tr>
<tr class="separator:a91c38e944b32b2f82b9b7abe7fd549ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97731778c1ff3710d37493c69c3eb60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#ae97731778c1ff3710d37493c69c3eb60">create</a> (const char *path)</td></tr>
<tr class="memdesc:ae97731778c1ff3710d37493c69c3eb60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new container file.  <a href="class_block_device.html#ae97731778c1ff3710d37493c69c3eb60">More...</a><br /></td></tr>
<tr class="separator:ae97731778c1ff3710d37493c69c3eb60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5dcc8bf86ecf69726a369e6bd9776af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#ac5dcc8bf86ecf69726a369e6bd9776af">close</a> ()</td></tr>
<tr class="memdesc:ac5dcc8bf86ecf69726a369e6bd9776af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a container file.  <a href="class_block_device.html#ac5dcc8bf86ecf69726a369e6bd9776af">More...</a><br /></td></tr>
<tr class="separator:ac5dcc8bf86ecf69726a369e6bd9776af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76cc15bf545883e82295892c0ff351c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#ac76cc15bf545883e82295892c0ff351c">read</a> (uint32_t blockNo, char *buffer)</td></tr>
<tr class="memdesc:ac76cc15bf545883e82295892c0ff351c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a block.  <a href="class_block_device.html#ac76cc15bf545883e82295892c0ff351c">More...</a><br /></td></tr>
<tr class="separator:ac76cc15bf545883e82295892c0ff351c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847707a4bb4fc9f6952d4c998a86e3f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_device.html#a847707a4bb4fc9f6952d4c998a86e3f2">write</a> (uint32_t blockNo, char *buffer)</td></tr>
<tr class="memdesc:a847707a4bb4fc9f6952d4c998a86e3f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a block.  <a href="class_block_device.html#a847707a4bb4fc9f6952d4c998a86e3f2">More...</a><br /></td></tr>
<tr class="separator:a847707a4bb4fc9f6952d4c998a86e3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Emulate a block device. </p>
<p>This class emulates access to a generic block device (e.g. a hard disc or USB drive partition) using the local file system. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5d69d96c45c02ac4cffb3107f50ebd92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d69d96c45c02ac4cffb3107f50ebd92">&#9670;&nbsp;</a></span>BlockDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BlockDevice::BlockDevice </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new block device. </p>
<p>Create a block device object with a given block size. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blockSize</td><td>Block size. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac5dcc8bf86ecf69726a369e6bd9776af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5dcc8bf86ecf69726a369e6bd9776af">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlockDevice::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a container file. </p>
<p>This method closes a container file. </p><dl class="section return"><dt>Returns</dt><dd>0 on success, -ERRNO on failure. </dd></dl>

</div>
</div>
<a id="ae97731778c1ff3710d37493c69c3eb60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae97731778c1ff3710d37493c69c3eb60">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlockDevice::create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new container file. </p>
<p>This methods creates a new container file and attaches it to the block device object. If the container file already exists, the content is erased.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path of the container file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -ERRNO on failure. </dd></dl>

</div>
</div>
<a id="a91c38e944b32b2f82b9b7abe7fd549ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c38e944b32b2f82b9b7abe7fd549ae">&#9670;&nbsp;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlockDevice::open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an existing container file. </p>
<p>This methods opens an existing container file and attaches it to the block device object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path of the container file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -ERRNO on failure. </dd></dl>

</div>
</div>
<a id="ac76cc15bf545883e82295892c0ff351c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76cc15bf545883e82295892c0ff351c">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlockDevice::read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a block. </p>
<p>This method reads the block with the number blockNo from the container file. The content of the block is stored in the buffer. Note that the size of the buffer must be at least one block. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">blockNo</td><td>Number of the block to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Buffer for storing the content of the block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -ERRNO on failure. </dd></dl>

</div>
</div>
<a id="a847707a4bb4fc9f6952d4c998a86e3f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847707a4bb4fc9f6952d4c998a86e3f2">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlockDevice::write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a block. </p>
<p>This method write the block with the number blockNo into the container file. The content of the block is given by the buffer. Note that the size of the buffer must be at least one block. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">blockNo</td><td>Number of the block to write. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Buffer storing the content to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -ERRNO on failure. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>includes/<a class="el" href="blockdevice_8h_source.html">blockdevice.h</a></li>
<li>src/blockdevice.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
